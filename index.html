<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>كتالوج محل البركة - العراق</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #8b0000;
            --secondary-color: #ffd700;
            --accent-color: #006400;
            --light-color: #fff8dc;
            --dark-color: #2f2f2f;
            --shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #f5f5f5 0%, #e6e6e6 100%);
            color: var(--dark-color);
            line-height: 1.6;
            min-height: 100vh;
            transition: var(--transition);
            font-size: 14px; /* حجم خط أصغر للهواتف */
        }
        
        .container {
            max-width: 100%;
            margin: 0 auto;
            padding: 10px;
        }
        
        header {
            background: linear-gradient(135deg, var(--primary-color), #a52a2a);
            color: white;
            padding: 15px 0;
            text-align: center;
            margin-bottom: 15px;
            border-radius: 10px;
            box-shadow: var(--shadow);
            position: relative;
            overflow: hidden;
            transition: var(--transition);
        }
        
        header::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" width="100" height="100" opacity="0.1"><path fill="%23FFD700" d="M50,5L60,40L95,40L65,60L75,95L50,75L25,95L35,60L5,40L40,40Z"/></svg>');
            background-size: 60px;
        }
        
        header h1 {
            font-size: 1.5rem;
            margin-bottom: 5px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
            position: relative;
        }
        
        header p {
            font-size: 0.9rem;
            opacity: 0.9;
            position: relative;
        }
        
        .tabs {
            display: flex;
            justify-content: center;
            margin-bottom: 15px;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: var(--shadow);
            position: relative;
            transition: var(--transition);
        }
        
        .tab {
            padding: 12px 15px;
            cursor: pointer;
            font-weight: bold;
            transition: var(--transition);
            flex: 1;
            text-align: center;
            position: relative;
            overflow: hidden;
            font-size: 0.9rem;
        }
        
        .tab::after {
            content: "";
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 3px;
            background: var(--secondary-color);
            transition: var(--transition);
        }
        
        .tab.active {
            background-color: var(--primary-color);
            color: white;
        }
        
        .tab.active::after {
            width: 100%;
        }
        
        .tab:hover:not(.active) {
            background-color: #f0f0f0;
        }
        
        .tab-content {
            display: none;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .tab-content.active {
            display: block;
        }
        
        .form-container {
            background: white;
            padding: 15px;
            border-radius: 10px;
            box-shadow: var(--shadow);
            margin-bottom: 15px;
            transition: var(--transition);
        }
        
        .form-container:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
        }
        
        .form-group {
            margin-bottom: 15px;
            position: relative;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: var(--primary-color);
            font-size: 0.9rem;
        }
        
        input, textarea, select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 0.9rem;
            transition: var(--transition);
        }
        
        input:focus, textarea:focus, select:focus {
            border-color: var(--primary-color);
            outline: none;
            box-shadow: 0 0 0 3px rgba(139, 0, 0, 0.1);
        }
        
        .image-preview {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
            gap: 10px;
            margin-top: 10px;
        }
        
        .image-preview img {
            width: 100%;
            height: 80px;
            object-fit: cover;
            border-radius: 8px;
            border: 2px solid #e0e0e0;
            transition: var(--transition);
            cursor: pointer;
        }
        
        .image-preview img:hover {
            transform: scale(1.05);
            border-color: var(--primary-color);
        }
        
        .btn {
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: bold;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, var(--primary-color), #a52a2a);
            color: white;
            box-shadow: 0 4px 15px rgba(139, 0, 0, 0.3);
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(139, 0, 0, 0.4);
        }
        
        .btn-secondary {
            background: linear-gradient(135deg, var(--secondary-color), #ffed4e);
            color: var(--dark-color);
            box-shadow: 0 4px 15px rgba(255, 215, 0, 0.3);
        }
        
        .btn-secondary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 215, 0, 0.4);
        }
        
        .btn-danger {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
            box-shadow: 0 4px 15px rgba(231, 76, 60, 0.3);
        }
        
        .btn-danger:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(231, 76, 60, 0.4);
        }
        
        .filter-container {
            background: white;
            padding: 15px;
            border-radius: 10px;
            box-shadow: var(--shadow);
            margin-bottom: 15px;
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            align-items: center;
            justify-content: center;
        }
        
        .filter-btn {
            padding: 8px 15px;
            border: 2px solid var(--primary-color);
            background: white;
            color: var(--primary-color);
            border-radius: 20px;
            cursor: pointer;
            font-weight: bold;
            transition: var(--transition);
            font-size: 0.8rem;
        }
        
        .filter-btn.active, .filter-btn:hover {
            background: var(--primary-color);
            color: white;
        }
        
        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        
        .product-card {
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: var(--transition);
            position: relative;
        }
        
        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }
        
        .discount-badge {
            position: absolute;
            top: 10px;
            left: 10px;
            background: linear-gradient(135deg, var(--accent-color), #008000);
            color: white;
            padding: 6px 10px;
            border-radius: 15px;
            font-weight: bold;
            z-index: 2;
            box-shadow: 0 4px 10px rgba(0, 100, 0, 0.3);
            animation: pulse 2s infinite;
            font-size: 0.7rem;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .product-image-container {
            width: 100%;
            height: 140px;
            overflow: hidden;
            position: relative;
        }
        
        .product-image {
            width: 100%;
            height: 100%;
            object-fit: contain;
            background: #f9f9f9;
            transition: var(--transition);
            padding: 8px;
        }
        
        .product-card:hover .product-image {
            transform: scale(1.05);
        }
        
        .product-info {
            padding: 12px;
            position: relative;
        }
        
        .product-name {
            font-size: 0.9rem;
            font-weight: bold;
            margin-bottom: 5px;
            color: var(--primary-color);
        }
        
        .product-price {
            font-size: 0.9rem;
            color: var(--accent-color);
            font-weight: bold;
            margin-bottom: 5px;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .original-price {
            text-decoration: line-through;
            color: #999;
            font-size: 0.8rem;
        }
        
        .product-desc {
            color: #666;
            font-size: 0.8rem;
            margin-bottom: 10px;
            line-height: 1.4;
            overflow: hidden;
            text-overflow: ellipsis;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
        }
        
        .product-category {
            display: inline-block;
            background: linear-gradient(135deg, var(--secondary-color), #ffed4e);
            padding: 4px 8px;
            border-radius: 15px;
            font-size: 0.7rem;
            color: var(--dark-color);
            font-weight: bold;
        }
        
        .product-store {
            display: inline-block;
            background: linear-gradient(135deg, #4a5568, #718096);
            color: white;
            padding: 4px 8px;
            border-radius: 15px;
            font-size: 0.7rem;
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .actions {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
        }
        
        .catalog-view {
            background: white;
            padding: 15px;
            border-radius: 10px;
            box-shadow: var(--shadow);
        }
        
        .catalog-header {
            text-align: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #f0f0f0;
        }
        
        .catalog-products {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 15px;
        }
        
        .catalog-product {
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: var(--transition);
            cursor: pointer;
            position: relative;
        }
        
        .catalog-product:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }
        
        .catalog-product:hover .product-image {
            transform: scale(1.05);
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            animation: fadeIn 0.3s ease;
            padding: 10px;
        }
        
        .modal-content {
            background: white;
            padding: 20px;
            border-radius: 15px;
            max-width: 100%;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.3);
            animation: slideUp 0.4s ease;
        }
        
        @keyframes slideUp {
            from { transform: translateY(50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 12px;
            border-bottom: 2px solid #f0f0f0;
        }
        
        .close-modal {
            font-size: 1.5rem;
            cursor: pointer;
            color: #777;
            transition: var(--transition);
            background: none;
            border: none;
            padding: 5px;
        }
        
        .close-modal:hover {
            color: var(--primary-color);
            transform: rotate(90deg);
        }
        
        .whatsapp-btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            background: linear-gradient(135deg, #25D366, #128C7E);
            color: white;
            padding: 12px 20px;
            border-radius: 8px;
            text-decoration: none;
            font-weight: bold;
            margin-top: 15px;
            text-align: center;
            width: 100%;
            transition: var(--transition);
            box-shadow: 0 4px 15px rgba(37, 211, 102, 0.3);
            font-size: 0.9rem;
        }
        
        .whatsapp-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(37, 211, 102, 0.4);
        }
        
        .empty-state {
            text-align: center;
            padding: 40px 15px;
            color: #777;
        }
        
        .empty-state i {
            font-size: 3rem;
            margin-bottom: 15px;
            color: #ddd;
        }
        
        .empty-state h3 {
            font-size: 1.2rem;
            margin-bottom: 10px;
        }
        
        .music-control {
            position: fixed;
            bottom: 15px;
            left: 15px;
            background: white;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: var(--shadow);
            cursor: pointer;
            z-index: 100;
            transition: var(--transition);
        }
        
        .music-control:hover {
            transform: scale(1.1);
        }
        
        .music-control i {
            font-size: 1.2rem;
            color: var(--primary-color);
        }
        
        .color-picker {
            position: fixed;
            bottom: 75px;
            left: 15px;
            background: white;
            border-radius: 10px;
            padding: 12px;
            box-shadow: var(--shadow);
            z-index: 100;
            display: none;
            flex-direction: column;
            gap: 8px;
            width: 180px;
            max-height: 250px;
            overflow-y: auto;
        }
        
        .color-picker.active {
            display: flex;
            animation: fadeIn 0.3s ease;
        }
        
        .color-option {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px;
            border-radius: 8px;
            cursor: pointer;
            transition: var(--transition);
        }
        
        .color-option:hover {
            background: #f5f5f5;
        }
        
        .color-preview {
            width: 25px;
            height: 25px;
            border-radius: 50%;
            border: 2px solid #e0e0e0;
        }
        
        .theme-control {
            position: fixed;
            bottom: 15px;
            left: 75px;
            background: white;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: var(--shadow);
            cursor: pointer;
            z-index: 100;
            transition: var(--transition);
        }
        
        .theme-control:hover {
            transform: scale(1.1);
        }
        
        .theme-control i {
            font-size: 1.2rem;
            color: var(--primary-color);
        }
        
        .back-btn {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            background: #f0f0f0;
            color: #333;
            padding: 8px 15px;
            border-radius: 20px;
            text-decoration: none;
            font-weight: bold;
            transition: var(--transition);
            border: none;
            cursor: pointer;
            font-size: 0.8rem;
        }
        
        .back-btn:hover {
            background: #e0e0e0;
        }
        
        /* تحسينات إضافية للهواتف */
        @media (max-width: 480px) {
            .container {
                padding: 8px;
            }
            
            header {
                padding: 12px 0;
                margin-bottom: 12px;
            }
            
            header h1 {
                font-size: 1.3rem;
            }
            
            header p {
                font-size: 0.8rem;
            }
            
            .tab {
                padding: 10px 12px;
                font-size: 0.8rem;
            }
            
            .form-container {
                padding: 12px;
            }
            
            .filter-container {
                padding: 12px;
                gap: 8px;
            }
            
            .filter-btn {
                padding: 6px 12px;
                font-size: 0.75rem;
            }
            
            .products-grid, .catalog-products {
                grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
                gap: 12px;
            }
            
            .product-image-container {
                height: 120px;
            }
            
            .product-info {
                padding: 10px;
            }
            
            .product-name {
                font-size: 0.85rem;
            }
            
            .product-price {
                font-size: 0.85rem;
            }
            
            .image-preview {
                grid-template-columns: repeat(auto-fill, minmax(70px, 1fr));
            }
            
            .image-preview img {
                height: 70px;
            }
            
            .btn {
                padding: 10px 15px;
                font-size: 0.85rem;
            }
            
            .modal-content {
                padding: 15px;
            }
            
            .music-control, .theme-control {
                width: 45px;
                height: 45px;
                bottom: 10px;
                left: 10px;
            }
            
            .theme-control {
                left: 65px;
            }
            
            .color-picker {
                bottom: 65px;
                left: 10px;
                width: 160px;
            }
        }
        
        @media (max-width: 360px) {
            .products-grid, .catalog-products {
                grid-template-columns: repeat(auto-fill, minmax(130px, 1fr));
            }
            
            .product-image-container {
                height: 110px;
            }
            
            .filter-btn {
                padding: 5px 10px;
                font-size: 0.7rem;
            }
        }
    </style>
</head>
<body>
    <!-- عنصر تحكم الموسيقى -->
    <div class="music-control" id="music-control">
        <i class="fas fa-music"></i>
        <audio id="background-music" loop>
            <source src="https://server11.mp3quran.net/yasser/018.mp3" type="audio/mpeg">
        </audio>
    </div>
    
    <!-- عنصر تحكم الألوان -->
    <div class="theme-control" id="theme-control">
        <i class="fas fa-palette"></i>
    </div>
    
    <!-- منتقي الألوان -->
    <div class="color-picker" id="color-picker">
        <div class="color-option" data-theme="red">
            <div class="color-preview" style="background: linear-gradient(135deg, #8b0000, #a52a2a);"></div>
            <span>أحمر تقليدي</span>
        </div>
        <div class="color-option" data-theme="blue">
            <div class="color-preview" style="background: linear-gradient(135deg, #1e3a8a, #3b82f6);"></div>
            <span>أزرق بحري</span>
        </div>
        <div class="color-option" data-theme="green">
            <div class="color-preview" style="background: linear-gradient(135deg, #065f46, #10b981);"></div>
            <span>أخضر طبيعي</span>
        </div>
        <div class="color-option" data-theme="purple">
            <div class="color-preview" style="background: linear-gradient(135deg, #6b21a8, #a855f7);"></div>
            <span>بنفسجي ملكي</span>
        </div>
        <div class="color-option" data-theme="orange">
            <div class="color-preview" style="background: linear-gradient(135deg, #9a3412, #ea580c);"></div>
            <span>برتقالي دافئ</span>
        </div>
        <div class="color-option" data-theme="pink">
            <div class="color-preview" style="background: linear-gradient(135deg, #831843, #ec4899);"></div>
            <span>وردي أنثوي</span>
        </div>
        <div class="color-option" data-theme="teal">
            <div class="color-preview" style="background: linear-gradient(135deg, #134e4a, #14b8a6);"></div>
            <span>فيروزي ناعم</span>
        </div>
        <div class="color-option" data-theme="indigo">
            <div class="color-preview" style="background: linear-gradient(135deg, #3730a3, #6366f1);"></div>
            <span>نيلي عميق</span>
        </div>
        <div class="color-option" data-theme="amber">
            <div class="color-preview" style="background: linear-gradient(135deg, #78350f, #f59e0b);"></div>
            <span>ذهبي لامع</span>
        </div>
        <div class="color-option" data-theme="rose">
            <div class="color-preview" style="background: linear-gradient(135deg, #9f1239, #fb7185);"></div>
            <span>زهري جريء</span>
        </div>
    </div>
    
    <header>
        <div class="container">
            <h1>كتالوج محل البركة - العراق</h1>
            <p>منصة رقمية لعرض منتجات المحل والتفاعل مع العملاء</p>
        </div>
    </header>
    
    <div class="container">
        <div class="tabs">
            <div class="tab active" data-tab="management">إدارة المنتجات</div>
            <div class="tab" data-tab="catalog">معاينة الكتالوج</div>
        </div>
        
        <!-- إدارة المنتجات -->
        <div id="management" class="tab-content active">
            <div class="form-container">
                <h2><i class="fas fa-plus-circle"></i> إضافة منتج جديد</h2>
                <form id="product-form">
                    <div class="form-group">
                        <label for="product-store"><i class="fas fa-store"></i> اسم المتجر</label>
                        <input type="text" id="product-store" placeholder="مثال: أمازون ليلي" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="product-name"><i class="fas fa-tag"></i> اسم المنتج</label>
                        <input type="text" id="product-name" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="product-price"><i class="fas fa-dollar-sign"></i> السعر (دينار عراقي)</label>
                        <input type="number" id="product-price" min="0" step="100" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="original-price"><i class="fas fa-tag"></i> السعر الأصلي (للعروض)</label>
                        <input type="number" id="original-price" min="0" step="100">
                    </div>
                    
                    <div class="form-group">
                        <label for="delivery-price"><i class="fas fa-truck"></i> سعر التوصيل (دينار عراقي)</label>
                        <input type="number" id="delivery-price" min="0" step="100" value="0">
                    </div>
                    
                    <div class="form-group">
                        <label for="product-desc"><i class="fas fa-align-left"></i> وصف المنتج</label>
                        <textarea id="product-desc" rows="3"></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="product-category"><i class="fas fa-list"></i> فئة المنتج</label>
                        <select id="product-category">
                            <option value="إلكترونيات">إلكترونيات</option>
                            <option value="كهربائيات">كهربائيات</option>
                            <option value="منزلي">منزلي</option>
                            <option value="ملابس">ملابس</option>
                            <option value="ألعاب">ألعاب</option>
                            <option value="فحم">فحم</option>
                            <option value="مستخدم">مستخدم</option>
                            <option value="مكتبي">مكتبي</option>
                            <option value="أخرى">أخرى</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="product-images"><i class="fas fa-images"></i> صور المنتج</label>
                        <input type="file" id="product-images" multiple accept="image/*">
                        <div class="image-preview" id="image-preview"></div>
                    </div>
                    
                    <div class="form-group">
                        <label for="whatsapp-link"><i class="fab fa-whatsapp"></i> رابط واتساب</label>
                        <input type="url" id="whatsapp-link" placeholder="https://wa.me/9647xxxxxxxx" value="https://wa.me/9647501234567">
                    </div>
                    
                    <button type="submit" class="btn btn-primary"><i class="fas fa-plus"></i> أضف المنتج</button>
                </form>
            </div>
            
            <!-- فلترة المنتجات -->
            <div class="filter-container" id="management-filter">
                <button class="filter-btn active" data-category="الكل">الكل</button>
                <button class="filter-btn" data-category="إلكترونيات">إلكترونيات</button>
                <button class="filter-btn" data-category="كهربائيات">كهربائيات</button>
                <button class="filter-btn" data-category="منزلي">منزلي</button>
                <button class="filter-btn" data-category="ملابس">ملابس</button>
                <button class="filter-btn" data-category="ألعاب">ألعاب</button>
                <button class="filter-btn" data-category="فحم">فحم</button>
                <button class="filter-btn" data-category="مستخدم">مستخدم</button>
                <button class="filter-btn" data-category="مكتبي">مكتبي</button>
                <button class="filter-btn" data-category="أخرى">أخرى</button>
            </div>
            
            <!-- فلترة حسب المتجر -->
            <div class="filter-container" id="store-filter">
                <button class="filter-btn active" data-store="الكل">كل المتاجر</button>
                <!-- سيتم إضافة أزرار المتاجر ديناميكيًا -->
            </div>
            
            <div class="products-preview">
                <h2><i class="fas fa-eye"></i> معاينة المنتجات</h2>
                <div id="products-container" class="products-grid">
                    <!-- سيتم عرض المنتجات هنا ديناميكيًا -->
                </div>
                
                <div id="empty-products" class="empty-state">
                    <i class="fas fa-box-open"></i>
                    <h3>لا توجد منتجات مضافة بعد</h3>
                    <p>ابدأ بإضافة منتجاتك الأولى باستخدام النموذج أعلاه</p>
                </div>
            </div>
            
            <div style="text-align: center; margin-top: 20px;">
                <button id="save-catalog" class="btn btn-secondary"><i class="fas fa-download"></i> 💾 حفظ الكتالوج النهائي</button>
            </div>
        </div>
        
        <!-- معاينة الكتالوج -->
        <div id="catalog" class="tab-content">
            <div class="catalog-view">
                <div class="catalog-header">
                    <h2>كتالوج محل البركة</h2>
                    <p>تصفح منتجاتنا واتصل بنا للحجز أو الاستفسار</p>
                </div>
                
                <!-- فلترة الكتالوج -->
                <div class="filter-container" id="catalog-filter">
                    <button class="filter-btn active" data-category="الكل">الكل</button>
                    <button class="filter-btn" data-category="إلكترونيات">إلكترونيات</button>
                    <button class="filter-btn" data-category="كهربائيات">كهربائيات</button>
                    <button class="filter-btn" data-category="منزلي">منزلي</button>
                    <button class="filter-btn" data-category="ملابس">ملابس</button>
                    <button class="filter-btn" data-category="ألعاب">ألعاب</button>
                    <button class="filter-btn" data-category="فحم">فحم</button>
                    <button class="filter-btn" data-category="مستخدم">مستخدم</button>
                    <button class="filter-btn" data-category="مكتبي">مكتبي</button>
                    <button class="filter-btn" data-category="أخرى">أخرى</button>
                </div>
                
                <!-- فلترة حسب المتجر -->
                <div class="filter-container" id="catalog-store-filter">
                    <button class="filter-btn active" data-store="الكل">كل المتاجر</button>
                    <!-- سيتم إضافة أزرار المتاجر ديناميكيًا -->
                </div>
                
                <div id="catalog-products" class="catalog-products">
                    <!-- سيتم عرض منتجات الكتالوج هنا ديناميكيًا -->
                </div>
                
                <div id="empty-catalog" class="empty-state">
                    <i class="fas fa-shopping-cart"></i>
                    <h3>لا توجد منتجات في الكتالوج</h3>
                    <p>ارجع إلى قسم إدارة المنتجات لإضافة منتجات أولاً</p>
                </div>
            </div>
        </div>
    </div>
    
    <!-- نافذة تفاصيل المنتج -->
    <div id="product-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modal-product-name">اسم المنتج</h3>
                <button class="close-modal">&times;</button>
            </div>
            <div id="modal-product-content">
                <!-- محتوى المنتج سيتم إضافته ديناميكيًا -->
            </div>
            <div style="text-align: center; margin-top: 15px;">
                <button class="back-btn" id="modal-back-btn"><i class="fas fa-arrow-right"></i> رجوع</button>
            </div>
        </div>
    </div>
    
    <script>
        // بيانات التطبيق
        let products = JSON.parse(localStorage.getItem('alkarmaProducts')) || [];
        let currentCategory = 'الكل';
        let currentStore = 'الكل';
        
        // عناصر DOM
        const productForm = document.getElementById('product-form');
        const productsContainer = document.getElementById('products-container');
        const catalogProducts = document.getElementById('catalog-products');
        const emptyProducts = document.getElementById('empty-products');
        const emptyCatalog = document.getElementById('empty-catalog');
        const imagePreview = document.getElementById('image-preview');
        const productImagesInput = document.getElementById('product-images');
        const tabs = document.querySelectorAll('.tab');
        const tabContents = document.querySelectorAll('.tab-content');
        const productModal = document.getElementById('product-modal');
        const closeModal = document.querySelector('.close-modal');
        const modalBackBtn = document.getElementById('modal-back-btn');
        const modalProductName = document.getElementById('modal-product-name');
        const modalProductContent = document.getElementById('modal-product-content');
        const saveCatalogBtn = document.getElementById('save-catalog');
        const musicControl = document.getElementById('music-control');
        const backgroundMusic = document.getElementById('background-music');
        const themeControl = document.getElementById('theme-control');
        const colorPicker = document.getElementById('color-picker');
        const colorOptions = document.querySelectorAll('.color-option');
        const managementFilter = document.getElementById('management-filter');
        const catalogFilter = document.getElementById('catalog-filter');
        const storeFilter = document.getElementById('store-filter');
        const catalogStoreFilter = document.getElementById('catalog-store-filter');
        
        // مصفوفة للصور المؤقتة قبل إضافة المنتج
        let tempImages = [];
        
        // تهيئة التطبيق
        document.addEventListener('DOMContentLoaded', function() {
            renderProducts();
            renderCatalog();
            setupEventListeners();
            loadTheme();
            updateStoreFilters();
        });
        
        // إعداد المستمعين للأحداث
        function setupEventListeners() {
            // تغيير التبويبات
            tabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    const tabId = this.getAttribute('data-tab');
                    
                    // إزالة النشاط من جميع التبويبات
                    tabs.forEach(t => t.classList.remove('active'));
                    tabContents.forEach(tc => tc.classList.remove('active'));
                    
                    // إضافة النشاط للتبويب المحدد
                    this.classList.add('active');
                    document.getElementById(tabId).classList.add('active');
                });
            });
            
            // معالجة إضافة المنتج
            productForm.addEventListener('submit', function(e) {
                e.preventDefault();
                addProduct();
            });
            
            // معالجة اختيار الصور
            productImagesInput.addEventListener('change', handleImageSelection);
            
            // إغلاق نافذة المنتج
            closeModal.addEventListener('click', function() {
                productModal.style.display = 'none';
            });
            
            // زر الرجوع في نافذة المنتج
            modalBackBtn.addEventListener('click', function() {
                productModal.style.display = 'none';
            });
            
            // إغلاق النافذة عند النقر خارجها
            window.addEventListener('click', function(event) {
                if (event.target === productModal) {
                    productModal.style.display = 'none';
                }
            });
            
            // حفظ الكتالوج النهائي
            saveCatalogBtn.addEventListener('click', generateFinalCatalog);
            
            // تحكم بالموسيقى
            musicControl.addEventListener('click', function() {
                if (backgroundMusic.paused) {
                    backgroundMusic.play();
                    musicControl.innerHTML = '<i class="fas fa-pause"></i>';
                } else {
                    backgroundMusic.pause();
                    musicControl.innerHTML = '<i class="fas fa-music"></i>';
                }
            });
            
            // تحكم بمنتقي الألوان
            themeControl.addEventListener('click', function() {
                colorPicker.classList.toggle('active');
            });
            
            // اختيار الألوان
            colorOptions.forEach(option => {
                option.addEventListener('click', function() {
                    const theme = this.getAttribute('data-theme');
                    applyTheme(theme);
                    colorPicker.classList.remove('active');
                });
            });
            
            // إغلاق منتقي الألوان عند النقر خارجها
            document.addEventListener('click', function(e) {
                if (!themeControl.contains(e.target) && !colorPicker.contains(e.target)) {
                    colorPicker.classList.remove('active');
                }
            });
            
            // فلترة المنتجات في واجهة الإدارة
            managementFilter.addEventListener('click', function(e) {
                if (e.target.classList.contains('filter-btn')) {
                    // إزالة النشاط من جميع الأزرار
                    managementFilter.querySelectorAll('.filter-btn').forEach(btn => {
                        btn.classList.remove('active');
                    });
                    
                    // إضافة النشاط للزر المحدد
                    e.target.classList.add('active');
                    
                    // تصفية المنتجات
                    currentCategory = e.target.getAttribute('data-category');
                    renderProducts();
                }
            });
            
            // فلترة المنتجات حسب المتجر في واجهة الإدارة
            storeFilter.addEventListener('click', function(e) {
                if (e.target.classList.contains('filter-btn')) {
                    // إزالة النشاط من جميع الأزرار
                    storeFilter.querySelectorAll('.filter-btn').forEach(btn => {
                        btn.classList.remove('active');
                    });
                    
                    // إضافة النشاط للزر المحدد
                    e.target.classList.add('active');
                    
                    // تصفية المنتجات حسب المتجر
                    currentStore = e.target.getAttribute('data-store');
                    renderProducts();
                }
            });
            
            // فلترة المنتجات في واجهة الكتالوج
            catalogFilter.addEventListener('click', function(e) {
                if (e.target.classList.contains('filter-btn')) {
                    // إزالة النشاط من جميع الأزرار
                    catalogFilter.querySelectorAll('.filter-btn').forEach(btn => {
                        btn.classList.remove('active');
                    });
                    
                    // إضافة النشاط للزر المحدد
                    e.target.classList.add('active');
                    
                    // تصفية المنتجات
                    currentCategory = e.target.getAttribute('data-category');
                    renderCatalog();
                }
            });
            
            // فلترة المنتجات حسب المتجر في واجهة الكتالوج
            catalogStoreFilter.addEventListener('click', function(e) {
                if (e.target.classList.contains('filter-btn')) {
                    // إزالة النشاط من جميع الأزرار
                    catalogStoreFilter.querySelectorAll('.filter-btn').forEach(btn => {
                        btn.classList.remove('active');
                    });
                    
                    // إضافة النشاط للزر المحدد
                    e.target.classList.add('active');
                    
                    // تصفية المنتجات حسب المتجر
                    currentStore = e.target.getAttribute('data-store');
                    renderCatalog();
                }
            });
        }
        
        // تحديث فلتر المتاجر
        function updateStoreFilters() {
            // الحصول على جميع المتاجر الفريدة
            const stores = [...new Set(products.map(product => product.store))];
            
            // تحديث فلتر المتاجر في واجهة الإدارة
            storeFilter.innerHTML = '<button class="filter-btn active" data-store="الكل">كل المتاجر</button>';
            stores.forEach(store => {
                const button = document.createElement('button');
                button.className = 'filter-btn';
                button.setAttribute('data-store', store);
                button.textContent = store;
                storeFilter.appendChild(button);
            });
            
            // تحديث فلتر المتاجر في واجهة الكتالوج
            catalogStoreFilter.innerHTML = '<button class="filter-btn active" data-store="الكل">كل المتاجر</button>';
            stores.forEach(store => {
                const button = document.createElement('button');
                button.className = 'filter-btn';
                button.setAttribute('data-store', store);
                button.textContent = store;
                catalogStoreFilter.appendChild(button);
            });
        }
        
        // معالجة اختيار الصور
        function handleImageSelection(e) {
            const files = e.target.files;
            tempImages = [];
            imagePreview.innerHTML = '';
            
            for (let i = 0; i < files.length; i++) {
                const file = files[i];
                const reader = new FileReader();
                
                reader.onload = function(e) {
                    // إنشاء صورة مصغرة
                    const img = new Image();
                    img.onload = function() {
                        // إنشاء عنصر canvas لضغط الصورة
                        const canvas = document.createElement('canvas');
                        const ctx = canvas.getContext('2d');
                        
                        // تحديد أبعاد الصورة المصغرة
                        const maxWidth = 300;
                        const maxHeight = 300;
                        let width = img.width;
                        let height = img.height;
                        
                        if (width > height) {
                            if (width > maxWidth) {
                                height *= maxWidth / width;
                                width = maxWidth;
                            }
                        } else {
                            if (height > maxHeight) {
                                width *= maxHeight / height;
                                height = maxHeight;
                            }
                        }
                        
                        canvas.width = width;
                        canvas.height = height;
                        ctx.drawImage(img, 0, 0, width, height);
                        
                        // الحصول على الصورة المضغوطة
                        const compressedImage = canvas.toDataURL('image/jpeg', 0.7);
                        tempImages.push(compressedImage);
                        
                        // عرض الصورة المصغرة
                        const thumbImg = document.createElement('img');
                        thumbImg.src = compressedImage;
                        imagePreview.appendChild(thumbImg);
                    };
                    img.src = e.target.result;
                };
                
                reader.readAsDataURL(file);
            }
        }
        
        // إضافة منتج جديد
        function addProduct() {
            const store = document.getElementById('product-store').value;
            const name = document.getElementById('product-name').value;
            const price = document.getElementById('product-price').value;
            const originalPrice = document.getElementById('original-price').value;
            const deliveryPrice = document.getElementById('delivery-price').value;
            const desc = document.getElementById('product-desc').value;
            const category = document.getElementById('product-category').value;
            const waLink = document.getElementById('whatsapp-link').value;
            
            // إنشاء كائن المنتج
            const product = {
                id: Date.now(),
                store: store,
                name: name,
                price: price,
                originalPrice: originalPrice,
                deliveryPrice: deliveryPrice,
                desc: desc,
                category: category,
                images: [...tempImages],
                waLink: waLink || 'https://wa.me/9647501234567'
            };
            
            // إضافة المنتج للمصفوفة
            products.push(product);
            
            // حفظ في localStorage
            localStorage.setItem('alkarmaProducts', JSON.stringify(products));
            
            // إعادة عرض المنتجات
            renderProducts();
            renderCatalog();
            updateStoreFilters();
            
            // إعادة تعيين النموذج
            productForm.reset();
            tempImages = [];
            imagePreview.innerHTML = '';
            
            // إظهار رسالة نجاح
            showNotification('تم إضافة المنتج بنجاح!', 'success');
        }
        
        // عرض المنتجات في واجهة الإدارة
        function renderProducts() {
            productsContainer.innerHTML = '';
            
            // تصفية المنتجات حسب الفئة والمتجر
            let filteredProducts = currentCategory === 'الكل' 
                ? products 
                : products.filter(product => product.category === currentCategory);
                
            filteredProducts = currentStore === 'الكل'
                ? filteredProducts
                : filteredProducts.filter(product => product.store === currentStore);
            
            if (filteredProducts.length === 0) {
                emptyProducts.style.display = 'block';
                return;
            }
            
            emptyProducts.style.display = 'none';
            
            filteredProducts.forEach(function(product, index) {
                const productCard = document.createElement('div');
                productCard.className = 'product-card';
                
                // إضافة شارة التخفيض إذا كان هناك سعر أصلي
                let discountBadge = '';
                if (product.originalPrice && product.originalPrice > product.price) {
                    const discountPercent = Math.round(((product.originalPrice - product.price) / product.originalPrice) * 100);
                    discountBadge = `<div class="discount-badge">عرض ${discountPercent}%</div>`;
                }
                
                // عرض السعر مع التخفيض إذا كان موجودًا
                let priceHtml = `<div class="product-price">${formatPrice(product.price)} د.ع</div>`;
                if (product.originalPrice && product.originalPrice > product.price) {
                    priceHtml = `
                        <div class="product-price">
                            ${formatPrice(product.price)} د.ع
                            <span class="original-price">${formatPrice(product.originalPrice)} د.ع</span>
                        </div>
                    `;
                }
                
                // عرض سعر التوصيل إذا كان موجودًا
                let deliveryHtml = '';
                if (product.deliveryPrice && product.deliveryPrice > 0) {
                    deliveryHtml = `<div style="color: #666; font-size: 0.8rem; margin-bottom: 5px;">+ ${formatPrice(product.deliveryPrice)} د.ع توصيل</div>`;
                }
                
                productCard.innerHTML = `
                    ${discountBadge}
                    <div class="product-image-container">
                        <img src="${product.images[0] || 'https://via.placeholder.com/300x200?text=لا+توجد+صورة'}" alt="${product.name}" class="product-image">
                    </div>
                    <div class="product-info">
                        <div class="product-store">${product.store}</div>
                        <div class="product-name">${product.name}</div>
                        ${priceHtml}
                        ${deliveryHtml}
                        <div class="product-desc">${product.desc}</div>
                        <div class="product-category">${product.category}</div>
                        <div class="actions">
                            <button class="btn btn-danger" data-index="${index}"><i class="fas fa-trash"></i> حذف</button>
                        </div>
                    </div>
                `;
                
                // إضافة حدث الحذف
                const deleteBtn = productCard.querySelector('.btn-danger');
                deleteBtn.addEventListener('click', function() {
                    deleteProduct(index);
                });
                
                productsContainer.appendChild(productCard);
            });
        }
        
        // عرض المنتجات في واجهة الكتالوج
        function renderCatalog() {
            catalogProducts.innerHTML = '';
            
            // تصفية المنتجات حسب الفئة والمتجر
            let filteredProducts = currentCategory === 'الكل' 
                ? products 
                : products.filter(product => product.category === currentCategory);
                
            filteredProducts = currentStore === 'الكل'
                ? filteredProducts
                : filteredProducts.filter(product => product.store === currentStore);
            
            if (filteredProducts.length === 0) {
                emptyCatalog.style.display = 'block';
                return;
            }
            
            emptyCatalog.style.display = 'none';
            
            filteredProducts.forEach(function(product) {
                const catalogProduct = document.createElement('div');
                catalogProduct.className = 'catalog-product';
                
                // إضافة شارة التخفيض إذا كان هناك سعر أصلي
                let discountBadge = '';
                if (product.originalPrice && product.originalPrice > product.price) {
                    const discountPercent = Math.round(((product.originalPrice - product.price) / product.originalPrice) * 100);
                    discountBadge = `<div class="discount-badge">عرض ${discountPercent}%</div>`;
                }
                
                // عرض السعر مع التخفيض إذا كان موجودًا
                let priceHtml = `<div class="product-price">${formatPrice(product.price)} د.ع</div>`;
                if (product.originalPrice && product.originalPrice > product.price) {
                    priceHtml = `
                        <div class="product-price">
                            ${formatPrice(product.price)} د.ع
                            <span class="original-price">${formatPrice(product.originalPrice)} د.ع</span>
                        </div>
                    `;
                }
                
                // عرض سعر التوصيل إذا كان موجودًا
                let deliveryHtml = '';
                if (product.deliveryPrice && product.deliveryPrice > 0) {
                    deliveryHtml = `<div style="color: #666; font-size: 0.8rem; margin-bottom: 5px;">+ ${formatPrice(product.deliveryPrice)} د.ع توصيل</div>`;
                }
                
                catalogProduct.innerHTML = `
                    ${discountBadge}
                    <div class="product-image-container">
                        <img src="${product.images[0] || 'https://via.placeholder.com/300x200?text=لا+توجد+صورة'}" alt="${product.name}" class="product-image">
                    </div>
                    <div class="product-info">
                        <div class="product-store">${product.store}</div>
                        <div class="product-name">${product.name}</div>
                        ${priceHtml}
                        ${deliveryHtml}
                    </div>
                `;
                
                catalogProduct.addEventListener('click', function() {
                    openProductModal(product);
                });
                
                catalogProducts.appendChild(catalogProduct);
            });
        }
        
        // فتح نافذة تفاصيل المنتج
        function openProductModal(product) {
            modalProductName.textContent = product.name;
            
            let imagesHtml = '';
            if (product.images.length > 0) {
                imagesHtml = '<div style="margin-bottom: 15px;">';
                product.images.forEach(function(img) {
                    imagesHtml += '<img src="' + img + '" style="width: 100%; max-height: 250px; object-fit: contain; border-radius: 5px; margin-bottom: 10px; background: #f9f9f9; padding: 10px;">';
                });
                imagesHtml += '</div>';
            }
            
            // عرض السعر مع التخفيض إذا كان موجودًا
            let priceHtml = `<p><strong>السعر:</strong> ${formatPrice(product.price)} دينار عراقي</p>`;
            if (product.originalPrice && product.originalPrice > product.price) {
                const discountPercent = Math.round(((product.originalPrice - product.price) / product.originalPrice) * 100);
                priceHtml = `
                    <p><strong>السعر:</strong> ${formatPrice(product.price)} دينار عراقي</p>
                    <p><strong>السعر الأصلي:</strong> <span style="text-decoration: line-through;">${formatPrice(product.originalPrice)} دينار عراقي</span></p>
                    <p><strong>التخفيض:</strong> <span style="color: #006400; font-weight: bold;">${discountPercent}%</span></p>
                `;
            }
            
            // عرض سعر التوصيل
            let deliveryHtml = '';
            if (product.deliveryPrice && product.deliveryPrice > 0) {
                deliveryHtml = `<p><strong>سعر التوصيل:</strong> ${formatPrice(product.deliveryPrice)} دينار عراقي</p>`;
            }
            
            // إنشاء رابط واتساب مع معلومات المنتج بشكل منسق
            const message = createWhatsAppMessage(product);
            const whatsappLink = `${product.waLink}?text=${message}`;
            
            modalProductContent.innerHTML = imagesHtml +
                `<p><strong>المتجر:</strong> ${product.store}</p>` +
                priceHtml +
                deliveryHtml +
                '<p><strong>الوصف:</strong> ' + product.desc + '</p>' +
                '<p><strong>الفئة:</strong> ' + product.category + '</p>' +
                '<a href="' + whatsappLink + '" target="_blank" class="whatsapp-btn"><i class="fab fa-whatsapp"></i> تواصل عبر واتساب</a>';
            
            productModal.style.display = 'flex';
        }
        
        // دالة لإنشاء رسالة واتساب منسقة
        function createWhatsAppMessage(product) {
            const totalPrice = parseInt(product.price) + (parseInt(product.deliveryPrice) || 0);
            
            let text = `🛒 *طلب شراء - ${product.store}* 🛒%0A`;
            text += `▬▬▬▬▬▬▬▬▬▬▬▬▬▬%0A%0A`;
            text += `📦 *المنتج:*%0A${product.name}%0A%0A`;
            text += `💰 *السعر:* ${formatPrice(product.price)} دينار%0A`;
            
            if (product.originalPrice && product.originalPrice > product.price) {
                const discountPercent = Math.round(((product.originalPrice - product.price) / product.originalPrice) * 100);
                text += `🏷️ *السعر الأصلي:* ${formatPrice(product.originalPrice)} دينار%0A`;
                text += `🎊 *نسبة التخفيض:* ${discountPercent}%%0A`;
            }
            
            if (product.deliveryPrice && product.deliveryPrice > 0) {
                text += `🚚 *سعر التوصيل:* ${formatPrice(product.deliveryPrice)} دينار%0A`;
                text += `💵 *المجموع الكلي:* ${formatPrice(totalPrice)} دينار%0A`;
            }
            
            text += `%0A▬▬▬▬▬▬▬▬▬▬▬▬▬▬%0A`;
            text += `🏪 *${product.store}*%0A`;
            text += `📞 *للاستفسار والحجز*`;
            
            return text;
        }
        
        // دالة لتنسيق الأرقام بفواصل
        function formatPrice(price) {
            return parseInt(price).toLocaleString('ar-IQ');
        }
        
        // حذف منتج
        function deleteProduct(index) {
            if (confirm('هل أنت متأكد من حذف هذا المنتج؟')) {
                products.splice(index, 1);
                localStorage.setItem('alkarmaProducts', JSON.stringify(products));
                renderProducts();
                renderCatalog();
                updateStoreFilters();
                showNotification('تم حذف المنتج بنجاح!', 'success');
            }
        }
        
        // تطبيق السمة المختارة
        function applyTheme(theme) {
            let primary, secondary, accent;
            
            switch(theme) {
                case 'red':
                    primary = '#8b0000';
                    secondary = '#ffd700';
                    accent = '#006400';
                    break;
                case 'blue':
                    primary = '#1e3a8a';
                    secondary = '#60a5fa';
                    accent = '#065f46';
                    break;
                case 'green':
                    primary = '#065f46';
                    secondary = '#10b981';
                    accent = '#1e3a8a';
                    break;
                case 'purple':
                    primary = '#6b21a8';
                    secondary = '#a855f7';
                    accent = '#9a3412';
                    break;
                case 'orange':
                    primary = '#9a3412';
                    secondary = '#ea580c';
                    accent = '#1e3a8a';
                    break;
                case 'pink':
                    primary = '#831843';
                    secondary = '#ec4899';
                    accent = '#065f46';
                    break;
                case 'teal':
                    primary = '#134e4a';
                    secondary = '#14b8a6';
                    accent = '#1e3a8a';
                    break;
                case 'indigo':
                    primary = '#3730a3';
                    secondary = '#6366f1';
                    accent = '#9a3412';
                    break;
                case 'amber':
                    primary = '#78350f';
                    secondary = '#f59e0b';
                    accent = '#1e3a8a';
                    break;
                case 'rose':
                    primary = '#9f1239';
                    secondary = '#fb7185';
                    accent = '#065f46';
                    break;
                default:
                    primary = '#8b0000';
                    secondary = '#ffd700';
                    accent = '#006400';
            }
            
            // تحديث CSS variables
            document.documentElement.style.setProperty('--primary-color', primary);
            document.documentElement.style.setProperty('--secondary-color', secondary);
            document.documentElement.style.setProperty('--accent-color', accent);
            
            // حفظ السمة في localStorage
            localStorage.setItem('alkarmaTheme', theme);
        }
        
        // تحميل السمة المحفوظة
        function loadTheme() {
            const savedTheme = localStorage.getItem('alkarmaTheme') || 'red';
            applyTheme(savedTheme);
        }
        
        // إنشاء الكتالوج النهائي
        function generateFinalCatalog() {
            if (products.length === 0) {
                showNotification('لا توجد منتجات لحفظها في الكتالوج!', 'error');
                return;
            }
            
            // إنشاء محتوى HTML للكتالوج النهائي
            const catalogHTML = createCatalogHTML();
            
            // إنشاء ملف وتنزيله
            const blob = new Blob([catalogHTML], { type: 'text/html' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'كتالوج-محل-البركة-العراق.html';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            showNotification('تم حفظ الكتالوج بنجاح! سيتم تنزيل الملف الآن.', 'success');
        }
        
        // دالة منفصلة لإنشاء HTML النهائي
        function createCatalogHTML() {
            let html = '<!DOCTYPE html>\n';
            html += '<html lang="ar" dir="rtl">\n';
            html += '<head>\n';
            html += '    <meta charset="UTF-8">\n';
            html += '    <meta name="viewport" content="width=device-width, initial-scale=1.0">\n';
            html += '    <title>كتالوج محل البركة - العراق</title>\n';
            html += '    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">\n';
            html += '    <style>\n';
            html += '        body {\n';
            html += '            font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;\n';
            html += '            margin: 0;\n';
            html += '            padding: 10px;\n';
            html += '            background: #f5f5f5;\n';
            html += '            line-height: 1.6;\n';
            html += '            font-size: 14px;\n';
            html += '        }\n';
            html += '        .container {\n';
            html += '            max-width: 100%;\n';
            html += '            margin: 0 auto;\n';
            html += '        }\n';
            html += '        header {\n';
            html += '            background: linear-gradient(135deg, #8b0000, #a52a2a);\n';
            html += '            color: white;\n';
            html += '            padding: 15px 0;\n';
            html += '            text-align: center;\n';
            html += '            margin-bottom: 15px;\n';
            html += '            border-radius: 10px;\n';
            html += '        }\n';
            html += '        .filter-container {\n';
            html += '            background: white;\n';
            html += '            padding: 15px;\n';
            html += '            border-radius: 10px;\n';
            html += '            box-shadow: 0 4px 15px rgba(0,0,0,0.1);\n';
            html += '            margin-bottom: 15px;\n';
            html += '            display: flex;\n';
            html += '            flex-wrap: wrap;\n';
            html += '            gap: 10px;\n';
            html += '            align-items: center;\n';
            html += '            justify-content: center;\n';
            html += '        }\n';
            html += '        .filter-btn {\n';
            html += '            padding: 8px 15px;\n';
            html += '            border: 2px solid #8b0000;\n';
            html += '            background: white;\n';
            html += '            color: #8b0000;\n';
            html += '            border-radius: 20px;\n';
            html += '            cursor: pointer;\n';
            html += '            font-weight: bold;\n';
            html += '            transition: all 0.3s ease;\n';
            html += '            font-size: 0.8rem;\n';
            html += '        }\n';
            html += '        .filter-btn.active, .filter-btn:hover {\n';
            html += '            background: #8b0000;\n';
            html += '            color: white;\n';
            html += '        }\n';
            html += '        .products-grid {\n';
            html += '            display: grid;\n';
            html += '            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));\n';
            html += '            gap: 15px;\n';
            html += '            margin-top: 15px;\n';
            html += '        }\n';
            html += '        .product-card {\n';
            html += '            background: white;\n';
            html += '            border-radius: 10px;\n';
            html += '            overflow: hidden;\n';
            html += '            box-shadow: 0 4px 15px rgba(0,0,0,0.1);\n';
            html += '            cursor: pointer;\n';
            html += '            transition: all 0.3s ease;\n';
            html += '        }\n';
            html += '        .product-card:hover {\n';
            html += '            transform: translateY(-5px);\n';
            html += '            box-shadow: 0 10px 25px rgba(0,0,0,0.15);\n';
            html += '        }\n';
            html += '        .discount-badge {\n';
            html += '            position: absolute;\n';
            html += '            top: 10px;\n';
            html += '            left: 10px;\n';
            html += '            background: linear-gradient(135deg, #006400, #008000);\n';
            html += '            color: white;\n';
            html += '            padding: 6px 10px;\n';
            html += '            border-radius: 15px;\n';
            html += '            font-weight: bold;\n';
            html += '            z-index: 2;\n';
            html += '            font-size: 0.7rem;\n';
            html += '        }\n';
            html += '        .product-image-container {\n';
            html += '            width: 100%;\n';
            html += '            height: 140px;\n';
            html += '            overflow: hidden;\n';
            html += '            position: relative;\n';
            html += '        }\n';
            html += '        .product-image {\n';
            html += '            width: 100%;\n';
            html += '            height: 100%;\n';
            html += '            object-fit: contain;\n';
            html += '            background: #f9f9f9;\n';
            html += '            padding: 8px;\n';
            html += '        }\n';
            html += '        .product-info {\n';
            html += '            padding: 12px;\n';
            html += '        }\n';
            html += '        .product-store {\n';
            html += '            display: inline-block;\n';
            html += '            background: linear-gradient(135deg, #4a5568, #718096);\n';
            html += '            color: white;\n';
            html += '            padding: 4px 8px;\n';
            html += '            border-radius: 15px;\n';
            html += '            font-size: 0.7rem;\n';
            html += '            font-weight: bold;\n';
            html += '            margin-bottom: 8px;\n';
            html += '        }\n';
            html += '        .product-name {\n';
            html += '            font-size: 0.9rem;\n';
            html += '            font-weight: bold;\n';
            html += '            margin-bottom: 5px;\n';
            html += '            color: #8b0000;\n';
            html += '        }\n';
            html += '        .product-price {\n';
            html += '            font-size: 0.9rem;\n';
            html += '            color: #006400;\n';
            html += '            font-weight: bold;\n';
            html += '        }\n';
            html += '        .original-price {\n';
            html += '            text-decoration: line-through;\n';
            html += '            color: #999;\n';
            html += '            font-size: 0.8rem;\n';
            html += '        }\n';
            html += '        .modal {\n';
            html += '            display: none;\n';
            html += '            position: fixed;\n';
            html += '            top: 0;\n';
            html += '            left: 0;\n';
            html += '            width: 100%;\n';
            html += '            height: 100%;\n';
            html += '            background: rgba(0,0,0,0.7);\n';
            html += '            z-index: 1000;\n';
            html += '            align-items: center;\n';
            html += '            justify-content: center;\n';
            html += '            padding: 10px;\n';
            html += '        }\n';
            html += '        .modal-content {\n';
            html += '            background: white;\n';
            html += '            padding: 20px;\n';
            html += '            border-radius: 15px;\n';
            html += '            max-width: 100%;\n';
            html += '            width: 100%;\n';
            html += '            max-height: 90vh;\n';
            html += '            overflow-y: auto;\n';
            html += '        }\n';
            html += '        .whatsapp-btn {\n';
            html += '            display: block;\n';
            html += '            background: #25D366;\n';
            html += '            color: white;\n';
            html += '            padding: 10px 20px;\n';
            html += '            border-radius: 5px;\n';
            html += '            text-decoration: none;\n';
            html += '            text-align: center;\n';
            html += '            margin-top: 15px;\n';
            html += '            font-weight: bold;\n';
            html += '        }\n';
            html += '        .back-btn {\n';
            html += '            display: inline-flex;\n';
            html += '            align-items: center;\n';
            html += '            gap: 5px;\n';
            html += '            background: #f0f0f0;\n';
            html += '            color: #333;\n';
            html += '            padding: 8px 15px;\n';
            html += '            border-radius: 20px;\n';
            html += '            text-decoration: none;\n';
            html += '            font-weight: bold;\n';
            html += '            transition: all 0.3s ease;\n';
            html += '            border: none;\n';
            html += '            cursor: pointer;\n';
            html += '            font-size: 0.8rem;\n';
            html += '            margin-top: 15px;\n';
            html += '        }\n';
            html += '    </style>\n';
            html += '</head>\n';
            html += '<body>\n';
            html += '    <div class="container">\n';
            html += '        <header>\n';
            html += '            <h1>كتالوج محل البركة - العراق</h1>\n';
            html += '            <p>تصفح منتجاتنا واتصل بنا للحجز أو الاستفسار</p>\n';
            html += '        </header>\n';
            html += '        \n';
            html += '        <!-- فلترة الكتالوج -->\n';
            html += '        <div class="filter-container" id="catalog-filter">\n';
            html += '            <button class="filter-btn active" data-category="الكل">الكل</button>\n';
            html += '            <button class="filter-btn" data-category="إلكترونيات">إلكترونيات</button>\n';
            html += '            <button class="filter-btn" data-category="كهربائيات">كهربائيات</button>\n';
            html += '            <button class="filter-btn" data-category="منزلي">منزلي</button>\n';
            html += '            <button class="filter-btn" data-category="ملابس">ملابس</button>\n';
            html += '            <button class="filter-btn" data-category="ألعاب">ألعاب</button>\n';
            html += '            <button class="filter-btn" data-category="فحم">فحم</button>\n';
            html += '            <button class="filter-btn" data-category="مستخدم">مستخدم</button>\n';
            html += '            <button class="filter-btn" data-category="مكتبي">مكتبي</button>\n';
            html += '            <button class="filter-btn" data-category="أخرى">أخرى</button>\n';
            html += '        </div>\n';
            html += '        \n';
            html += '        <!-- فلترة حسب المتجر -->\n';
            html += '        <div class="filter-container" id="catalog-store-filter">\n';
            html += '            <button class="filter-btn active" data-store="الكل">كل المتاجر</button>\n';
            
            // إضافة أزرار المتاجر
            const stores = [...new Set(products.map(product => product.store))];
            stores.forEach(store => {
                html += `            <button class="filter-btn" data-store="${store}">${store}</button>\n`;
            });
            
            html += '        </div>\n';
            html += '        \n';
            html += '        <div class="products-grid" id="products-container">\n';
            
            // إضافة المنتجات
            products.forEach(function(product) {
                // إضافة شارة التخفيض إذا كان هناك سعر أصلي
                let discountBadge = '';
                if (product.originalPrice && product.originalPrice > product.price) {
                    const discountPercent = Math.round(((product.originalPrice - product.price) / product.originalPrice) * 100);
                    discountBadge = '<div class="discount-badge">عرض ' + discountPercent + '%</div>';
                }
                
                // عرض السعر مع التخفيض إذا كان موجودًا
                let priceHtml = '<div class="product-price">' + formatPrice(product.price) + ' د.ع</div>';
                if (product.originalPrice && product.originalPrice > product.price) {
                    priceHtml = '<div class="product-price">' + formatPrice(product.price) + ' د.ع <span class="original-price">' + formatPrice(product.originalPrice) + ' د.ع</span></div>';
                }
                
                // عرض سعر التوصيل إذا كان موجودًا
                let deliveryHtml = '';
                if (product.deliveryPrice && product.deliveryPrice > 0) {
                    deliveryHtml = '<div style="color: #666; font-size: 0.8rem; margin-bottom: 5px;">+ ' + formatPrice(product.deliveryPrice) + ' د.ع توصيل</div>';
                }
                
                html += '            <div class="product-card" onclick="openProductModal(' + product.id + ')">\n';
                html += '                ' + discountBadge + '\n';
                html += '                <div class="product-image-container">\n';
                html += '                    <img src="' + (product.images[0] || 'https://via.placeholder.com/300x200?text=لا+توجد+صورة') + '" class="product-image">\n';
                html += '                </div>\n';
                html += '                <div class="product-info">\n';
                html += '                    <div class="product-store">' + product.store + '</div>\n';
                html += '                    <div class="product-name">' + product.name + '</div>\n';
                html += '                    ' + priceHtml + '\n';
                html += '                    ' + deliveryHtml + '\n';
                html += '                </div>\n';
                html += '            </div>\n';
            });
            
            html += '        </div>\n';
            html += '    </div>\n';
            html += '    \n';
            html += '    <div class="modal" id="product-modal">\n';
            html += '        <div class="modal-content">\n';
            html += '            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">\n';
            html += '                <h3 id="modal-product-name">اسم المنتج</h3>\n';
            html += '                <button style="font-size: 1.5rem; cursor: pointer; background: none; border: none; padding: 5px;" onclick="closeProductModal()">&times;</button>\n';
            html += '            </div>\n';
            html += '            <div id="modal-product-content"></div>\n';
            html += '            <div style="text-align: center; margin-top: 15px;">\n';
            html += '                <button class="back-btn" onclick="closeProductModal()"><i class="fas fa-arrow-right"></i> رجوع</button>\n';
            html += '            </div>\n';
            html += '        </div>\n';
            html += '    </div>\n';
            html += '    \n';
            html += '    <script>\n';
            html += '        const productsData = ' + JSON.stringify(products) + ';\n';
            html += '        let currentCategory = "الكل";\n';
            html += '        let currentStore = "الكل";\n';
            html += '        \n';
            html += '        function formatPrice(price) {\n';
            html += '            return parseInt(price).toLocaleString(\'ar-IQ\');\n';
            html += '        }\n';
            html += '        \n';
            html += '        function createWhatsAppMessage(product) {\n';
            html += '            const totalPrice = parseInt(product.price) + (parseInt(product.deliveryPrice) || 0);\n';
            html += '            \n';
            html += '            let text = `🛒 *طلب شراء - ${product.store}* 🛒%0A`;\n';
            html += '            text += `▬▬▬▬▬▬▬▬▬▬▬▬▬▬%0A%0A`;\n';
            html += '            text += `📦 *المنتج:*%0A${product.name}%0A%0A`;\n';
            html += '            text += `💰 *السعر:* ${formatPrice(product.price)} دينار%0A`;\n';
            html += '            \n';
            html += '            if (product.originalPrice && product.originalPrice > product.price) {\n';
            html += '                const discountPercent = Math.round(((product.originalPrice - product.price) / product.originalPrice) * 100);\n';
            html += '                text += `🏷️ *السعر الأصلي:* ${formatPrice(product.originalPrice)} دينار%0A`;\n';
            html += '                text += `🎊 *نسبة التخفيض:* ${discountPercent}%%0A`;\n';
            html += '            }\n';
            html += '            \n';
            html += '            if (product.deliveryPrice && product.deliveryPrice > 0) {\n';
            html += '                text += `🚚 *سعر التوصيل:* ${formatPrice(product.deliveryPrice)} دينار%0A`;\n';
            html += '                text += `💵 *المجموع الكلي:* ${formatPrice(totalPrice)} دينار%0A`;\n';
            html += '            }\n';
            html += '            \n';
            html += '            text += `%0A▬▬▬▬▬▬▬▬▬▬▬▬▬▬%0A`;\n';
            html += '            text += `🏪 *${product.store}*%0A`;\n';
            html += '            text += `📞 *للاستفسار والحجز*`;\n';
            html += '            \n';
            html += '            return text;\n';
            html += '        }\n';
            html += '        \n';
            html += '        function openProductModal(productId) {\n';
            html += '            const product = productsData.find(function(p) { return p.id === productId; });\n';
            html += '            if (!product) return;\n';
            html += '            \n';
            html += '            document.getElementById("modal-product-name").textContent = product.name;\n';
            html += '            \n';
            html += '            let imagesHtml = "";\n';
            html += '            if (product.images.length > 0) {\n';
            html += '                imagesHtml = "<div style=\\"margin-bottom: 15px;\\">";\n';
            html += '                product.images.forEach(function(img) {\n';
            html += '                    imagesHtml += \'<img src="\' + img + \'" style="width: 100%; max-height: 250px; object-fit: contain; border-radius: 5px; margin-bottom: 10px; background: #f9f9f9; padding: 10px;">\';\n';
            html += '                });\n';
            html += '                imagesHtml += "</div>";\n';
            html += '            }\n';
            html += '            \n';
            html += '            // عرض السعر مع التخفيض إذا كان موجودًا\n';
            html += '            let priceHtml = "<p><strong>السعر:</strong> " + formatPrice(product.price) + " دينار عراقي</p>";\n';
            html += '            if (product.originalPrice && product.originalPrice > product.price) {\n';
            html += '                const discountPercent = Math.round(((product.originalPrice - product.price) / product.originalPrice) * 100);\n';
            html += '                priceHtml = "<p><strong>السعر:</strong> " + formatPrice(product.price) + " دينار عراقي</p>" +\n';
            html += '                    "<p><strong>السعر الأصلي:</strong> <span style=\\"text-decoration: line-through;\\">" + formatPrice(product.originalPrice) + " دينار عراقي</span></p>" +\n';
            html += '                    "<p><strong>التخفيض:</strong> <span style=\\"color: #006400; font-weight: bold;\\">" + discountPercent + "%</span></p>";\n';
            html += '            }\n';
            html += '            \n';
            html += '            // عرض سعر التوصيل\n';
            html += '            let deliveryHtml = "";\n';
            html += '            if (product.deliveryPrice && product.deliveryPrice > 0) {\n';
            html += '                deliveryHtml = "<p><strong>سعر التوصيل:</strong> " + formatPrice(product.deliveryPrice) + " دينار عراقي</p>";\n';
            html += '            }\n';
            html += '            \n';
            html += '            // إنشاء رابط واتساب مع معلومات المنتج\n';
            html += '            const message = createWhatsAppMessage(product);\n';
            html += '            const whatsappLink = product.waLink + "?text=" + message;\n';
            html += '            \n';
            html += '            document.getElementById("modal-product-content").innerHTML = imagesHtml +\n';
            html += '                "<p><strong>المتجر:</strong> " + product.store + "</p>" +\n';
            html += '                priceHtml +\n';
            html += '                deliveryHtml +\n';
            html += '                "<p><strong>الوصف:</strong> " + product.desc + "</p>" +\n';
            html += '                "<p><strong>الفئة:</strong> " + product.category + "</p>" +\n';
            html += '                \'<a href="\' + whatsappLink + \'" target="_blank" class="whatsapp-btn"><i class="fab fa-whatsapp"></i> تواصل عبر واتساب</a>\';\n';
            html += '            \n';
            html += '            document.getElementById("product-modal").style.display = "flex";\n';
            html += '        }\n';
            html += '        \n';
            html += '        function closeProductModal() {\n';
            html += '            document.getElementById("product-modal").style.display = "none";\n';
            html += '        }\n';
            html += '        \n';
            html += '        // فلترة المنتجات حسب الفئة\n';
            html += '        function filterProducts(category) {\n';
            html += '            currentCategory = category;\n';
            html += '            const productsContainer = document.getElementById("products-container");\n';
            html += '            const filteredProducts = category === "الكل" ? productsData : productsData.filter(product => product.category === category);\n';
            html += '            \n';
            html += '            productsContainer.innerHTML = "";\n';
            html += '            \n';
            html += '            if (filteredProducts.length === 0) {\n';
            html += '                productsContainer.innerHTML = \'<div style="text-align: center; padding: 40px; color: #777; grid-column: 1 / -1;">لا توجد منتجات في هذه الفئة</div>\';\n';
            html += '                return;\n';
            html += '            }\n';
            html += '            \n';
            html += '            filteredProducts.forEach(function(product) {\n';
            html += '                let discountBadge = "";\n';
            html += '                if (product.originalPrice && product.originalPrice > product.price) {\n';
            html += '                    const discountPercent = Math.round(((product.originalPrice - product.price) / product.originalPrice) * 100);\n';
            html += '                    discountBadge = \'<div class="discount-badge">عرض \' + discountPercent + \'%</div>\';\n';
            html += '                }\n';
            html += '                \n';
            html += '                let priceHtml = \'<div class="product-price">\' + formatPrice(product.price) + \' د.ع</div>\';\n';
            html += '                if (product.originalPrice && product.originalPrice > product.price) {\n';
            html += '                    priceHtml = \'<div class="product-price">\' + formatPrice(product.price) + \' د.ع <span class="original-price">\' + formatPrice(product.originalPrice) + \' د.ع</span></div>\';\n';
            html += '                }\n';
            html += '                \n';
            html += '                let deliveryHtml = "";\n';
            html += '                if (product.deliveryPrice && product.deliveryPrice > 0) {\n';
            html += '                    deliveryHtml = \'<div style="color: #666; font-size: 0.8rem; margin-bottom: 5px;">+ \' + formatPrice(product.deliveryPrice) + \' د.ع توصيل</div>\';\n';
            html += '                }\n';
            html += '                \n';
            html += '                const productCard = document.createElement("div");\n';
            html += '                productCard.className = "product-card";\n';
            html += '                productCard.innerHTML = `\n';
            html += '                    ${discountBadge}\n';
            html += '                    <div class="product-image-container">\n';
            html += '                        <img src="${product.images[0] || \'https://via.placeholder.com/300x200?text=لا+توجد+صورة\'}" class="product-image">\n';
            html += '                    </div>\n';
            html += '                    <div class="product-info">\n';
            html += '                        <div class="product-store">${product.store}</div>\n';
            html += '                        <div class="product-name">${product.name}</div>\n';
            html += '                        ${priceHtml}\n';
            html += '                        ${deliveryHtml}\n';
            html += '                    </div>\n';
            html += '                `;\n';
            html += '                productCard.onclick = function() { openProductModal(product.id); };\n';
            html += '                productsContainer.appendChild(productCard);\n';
            html += '            });\n';
            html += '        }\n';
            html += '        \n';
            html += '        // فلترة المنتجات حسب المتجر\n';
            html += '        function filterProductsByStore(store) {\n';
            html += '            currentStore = store;\n';
            html += '            const productsContainer = document.getElementById("products-container");\n';
            html += '            const filteredProducts = store === "الكل" ? productsData : productsData.filter(product => product.store === store);\n';
            html += '            \n';
            html += '            productsContainer.innerHTML = "";\n';
            html += '            \n';
            html += '            if (filteredProducts.length === 0) {\n';
            html += '                productsContainer.innerHTML = \'<div style="text-align: center; padding: 40px; color: #777; grid-column: 1 / -1;">لا توجد منتجات في هذا المتجر</div>\';\n';
            html += '                return;\n';
            html += '            }\n';
            html += '            \n';
            html += '            filteredProducts.forEach(function(product) {\n';
            html += '                let discountBadge = "";\n';
            html += '                if (product.originalPrice && product.originalPrice > product.price) {\n';
            html += '                    const discountPercent = Math.round(((product.originalPrice - product.price) / product.originalPrice) * 100);\n';
            html += '                    discountBadge = \'<div class="discount-badge">عرض \' + discountPercent + \'%</div>\';\n';
            html += '                }\n';
            html += '                \n';
            html += '                let priceHtml = \'<div class="product-price">\' + formatPrice(product.price) + \' د.ع</div>\';\n';
            html += '                if (product.originalPrice && product.originalPrice > product.price) {\n';
            html += '                    priceHtml = \'<div class="product-price">\' + formatPrice(product.price) + \' د.ع <span class="original-price">\' + formatPrice(product.originalPrice) + \' د.ع</span></div>\';\n';
            html += '                }\n';
            html += '                \n';
            html += '                let deliveryHtml = "";\n';
            html += '                if (product.deliveryPrice && product.deliveryPrice > 0) {\n';
            html += '                    deliveryHtml = \'<div style="color: #666; font-size: 0.8rem; margin-bottom: 5px;">+ \' + formatPrice(product.deliveryPrice) + \' د.ع توصيل</div>\';\n';
            html += '                }\n';
            html += '                \n';
            html += '                const productCard = document.createElement("div");\n';
            html += '                productCard.className = "product-card";\n';
            html += '                productCard.innerHTML = `\n';
            html += '                    ${discountBadge}\n';
            html += '                    <div class="product-image-container">\n';
            html += '                        <img src="${product.images[0] || \'https://via.placeholder.com/300x200?text=لا+توجد+صورة\'}" class="product-image">\n';
            html += '                    </div>\n';
            html += '                    <div class="product-info">\n';
            html += '                        <div class="product-store">${product.store}</div>\n';
            html += '                        <div class="product-name">${product.name}</div>\n';
            html += '                        ${priceHtml}\n';
            html += '                        ${deliveryHtml}\n';
            html += '                    </div>\n';
            html += '                `;\n';
            html += '                productCard.onclick = function() { openProductModal(product.id); };\n';
            html += '                productsContainer.appendChild(productCard);\n';
            html += '            });\n';
            html += '        }\n';
            html += '        \n';
            html += '        // إعداد أحداث الفلترة حسب الفئة\n';
            html += '        document.getElementById("catalog-filter").addEventListener("click", function(e) {\n';
            html += '            if (e.target.classList.contains("filter-btn")) {\n';
            html += '                // إزالة النشاط من جميع الأزرار\n';
            html += '                document.querySelectorAll("#catalog-filter .filter-btn").forEach(btn => {\n';
            html += '                    btn.classList.remove("active");\n';
            html += '                });\n';
            html += '                \n';
            html += '                // إضافة النشاط للزر المحدد\n';
            html += '                e.target.classList.add("active");\n';
            html += '                \n';
            html += '                // تصفية المنتجات\n';
            html += '                const category = e.target.getAttribute("data-category");\n';
            html += '                filterProducts(category);\n';
            html += '            }\n';
            html += '        });\n';
            html += '        \n';
            html += '        // إعداد أحداث الفلترة حسب المتجر\n';
            html += '        document.getElementById("catalog-store-filter").addEventListener("click", function(e) {\n';
            html += '            if (e.target.classList.contains("filter-btn")) {\n';
            html += '                // إزالة النشاط من جميع الأزرار\n';
            html += '                document.querySelectorAll("#catalog-store-filter .filter-btn").forEach(btn => {\n';
            html += '                    btn.classList.remove("active");\n';
            html += '                });\n';
            html += '                \n';
            html += '                // إضافة النشاط للزر المحدد\n';
            html += '                e.target.classList.add("active");\n';
            html += '                \n';
            html += '                // تصفية المنتجات حسب المتجر\n';
            html += '                const store = e.target.getAttribute("data-store");\n';
            html += '                filterProductsByStore(store);\n';
            html += '            }\n';
            html += '        });\n';
            html += '        \n';
            html += '        window.addEventListener("click", function(event) {\n';
            html += '            const modal = document.getElementById("product-modal");\n';
            html += '            if (event.target === modal) {\n';
            html += '                closeProductModal();\n';
            html += '            }\n';
            html += '        });\n';
            html += '        \n';
            html += '        // تصفية أولية عند التحميل\n';
            html += '        filterProducts("الكل");\n';
            html += '    <\/script>\n';
            html += '</body>\n';
            html += '</html>';
            
            return html;
        }
        
        // دالة لعرض الإشعارات
        function showNotification(message, type) {
            // إنشاء عنصر الإشعار
            const notification = document.createElement('div');
            notification.textContent = message;
            notification.style.position = 'fixed';
            notification.style.top = '20px';
            notification.style.right = '20px';
            notification.style.padding = '15px 25px';
            notification.style.borderRadius = '10px';
            notification.style.color = 'white';
            notification.style.fontWeight = 'bold';
            notification.style.zIndex = '10000';
            notification.style.boxShadow = '0 5px 15px rgba(0,0,0,0.2)';
            notification.style.transform = 'translateX(100%)';
            notification.style.transition = 'transform 0.3s ease';
            
            // تحديد لون الخلفية حسب نوع الإشعار
            if (type === 'success') {
                notification.style.background = 'linear-gradient(135deg, #006400, #008000)';
            } else {
                notification.style.background = 'linear-gradient(135deg, #8b0000, #a52a2a)';
            }
            
            // إضافة الإشعار إلى الصفحة
            document.body.appendChild(notification);
            
            // عرض الإشعار
            setTimeout(() => {
                notification.style.transform = 'translateX(0)';
            }, 100);
            
            // إخفاء الإشعار بعد 3 ثوانٍ
            setTimeout(() => {
                notification.style.transform = 'translateX(100%)';
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 300);
            }, 3000);
        }
    </script>
</body>
</html>
